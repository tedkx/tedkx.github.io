"use strict";(self.webpackChunkmidi_playground=self.webpackChunkmidi_playground||[]).push([[947],{6985:function(e,n,t){t.d(n,{PW:function(){return c},Qz:function(){return o},f5:function(){return i},mr:function(){return l}});var r=t(9439),a=t(4896),o=function(e){var n=Math.floor(e/a.$c.length),t=e%a.$c.length;return"".concat(a.$c[t]).concat(n)},c=function(e){var n=(e||"").match(/(.{1,2})(\d{1})/)||[],t=(0,r.Z)(n,3),o=(t[0],t[1]),c=t[2];return o&&c?parseInt(c)*a.$c.length+a.$c.findIndex((function(e){return e===o.toUpperCase()})):null},l=function(e){return e[0]>=a.wm&&e[0]<=a.wm+a.J5&&e[2]>0},i=function(e){return e[0]>=a.$Z&&e[0]<=a.$Z+a.J5||e[0]>=a.wm&&e[0]<=a.wm+a.J5&&0===e[2]}},1947:function(e,n,t){t.r(n),t.d(n,{default:function(){return Oe}});var r,a=t(9439),o=t(1413),c=t(2791),l=t(915),i=t(5987),s=t(184),u=["children","className","index","onClick"],d=function(e){var n=e.children,t=e.className,r=(e.index,e.onClick),a=(0,i.Z)(e,u);return(0,s.jsxs)("div",(0,o.Z)((0,o.Z)({className:"keyboard-button ".concat(t),onClick:r},a),{},{children:[(0,s.jsx)("div",{className:"button-overlay"}),(0,s.jsx)("div",{className:"button-inner",children:n})]}))},m=["active","children","className","index","on","onClick","onWheel"],f=function(e){var n=e.active,t=e.children,r=e.className,a=e.index,l=e.on,u=e.onClick,d=e.onWheel,f=(0,i.Z)(e,m),v=c.useCallback((function(e){u&&u(a,l,e)}),[a,l,u]),p=c.useCallback((function(e){d&&d(a,e.deltaY<0?"up":"down",e)}),[a,d]);return(0,s.jsxs)("div",(0,o.Z)((0,o.Z)({className:"keyboard-pad ".concat(r," ").concat(n&&"active"," ").concat(l&&"on"),onClick:v,onWheel:p},f),{},{children:[(0,s.jsx)("div",{className:"pad-overlay"}),(0,s.jsx)("div",{className:"pad-inner",children:t})]}))},v=t(763),p=-144,h=function(e){var n=e.centerBased,t=e.className,r=e.displayValue,l=e.max,i=e.min,u=e.style,d=e.title,m=e.value,f=c.useMemo((function(){return function(e,n,t){var r=288*(e-n)/(t-n)+p;return Math.max(p,Math.min(144,r))}(m,i,l)}),[m,i,l]),h=function(e){var n=e.max,t=e.min,r=e.onSetValue,a=e.step,o=void 0===a?1:a,l=e.value,i=c.useRef({factor:1}),s=c.useMemo((function(){return(0,v.debounce)((function(){i.current.factor=o}),25)}),[o]);return c.useCallback((function(e){var a=l+o*i.current.factor*(e.deltaY<0?1:-1);r(Math.min(n,Math.max(t,a))),i.current.factor+=o,s()}),[l,o,t,n])}(e),g=function(e){var n=e.max,t=e.min,r=e.onSetValue,o=e.value,l=c.useRef({y:null,mouseMovelistener:null,mouseUplistener:null,mouseDown:!1,value:o}),i=c.useState(!1),s=(0,a.Z)(i,2),u=s[0],d=s[1];c.useEffect((function(){l.current.value=o}),[o]);var m=c.useCallback((function(e){0===e.button&&(d(!1),window.removeEventListener("mousemove",l.current.mouseMovelistener),window.removeEventListener("mouseup",l.current.mouseUplistener),l.current.listener=null)}),[d]),f=c.useCallback((function(e){var a=Math.min(n,Math.max(t,l.current.value+l.current.y-e.pageY));l.current.y=e.pageY,r(a)}),[r,t,n]);return{dragging:u,onMouseDown:c.useCallback((function(e){0===e.button&&(d(!0),l.current.y=e.pageY,l.current.mouseMovelistener=f,l.current.mouseUplistener=m,window.addEventListener("mousemove",l.current.mouseMovelistener),window.addEventListener("mouseup",l.current.mouseUplistener))}),[])}}(e),y=g.dragging,b=g.onMouseDown;return(0,s.jsxs)("div",{className:"rotary-knob ".concat(r&&"with-value"," ").concat(d&&"with-title"," ").concat(t),style:u,children:[y&&(0,s.jsx)("div",{className:"window-overlay"}),d&&(0,s.jsx)("div",{className:"title",children:d}),(0,s.jsx)("div",{className:"knob-overlay",onWheel:h,onMouseDown:b}),(0,s.jsxs)("div",{className:"knob-inner",children:[(0,s.jsx)("div",{className:"marker",style:{transform:"rotate(".concat(f,"deg)")}}),(0,s.jsx)("div",{className:"ticks",children:Array.from(Array(25)).map((function(e,t){return(0,s.jsx)("div",(0,o.Z)({},function(e,n,t){var r=p+12*e;return{className:"tick ".concat((t?n<0?r<=0&&r>=n:r>=0&&r<=n:n>p&&r<=n)&&"active"),key:e,style:{transform:"rotate(".concat(r,"deg)")}}}(t,f,n)),t)}))})]}),r&&(0,s.jsx)("div",{className:"value-wrap",children:(0,s.jsx)("div",{className:"value-display",children:m})})]})},g=["name","onSetParameter"],y=function(e){var n=e.name,t=e.onSetParameter,r=(0,i.Z)(e,g),a=c.useCallback((function(e){return t(n,e)}),[n,t]);return(0,s.jsx)("div",{className:"parameter-knob",children:(0,s.jsx)(h,(0,o.Z)({displayValue:!0,onSetValue:a},r))})},b=t(6985),C=function(e,n,t,r,a){return{centerBased:!0===a,defaultValue:t,max:n,min:e,title:r}},x=(r={bpm:138,noteDuration:100,notes:"G3 D4 G4 C5 D5 D#4 G4 A#4 D#5 F5 B3 G4 G#4 D5 D#5 F5 G5 G3 D4 G4 C5 D5 F4 G4 A#4 D#5 F5 C4 G4 G#4 D5 D#5",noteValue:16},(0,o.Z)((0,o.Z)({},r),{},{notes:r.notes.split(" ").map(b.PW)})),Z={noteDuration:C(1,300,x.noteDuration,"Note Duration"),transpose:C(-24,24,0,"Transpose",!0)},N={bpm:C(40,280,x.bpm,"Tempo"),noteValue:C(1,32,x.noteValue,"NoteValue")},k=t(4942),w=t(6270),j=t(7269),E=["notes"],O=["notes"],D=["bpm","noteValue"],I=function(e,n){return 6e4/e*4/n},S=function(e){if(!Array.isArray(e))return[];for(var n=e[0].notes.length,t=0;t<e.length;t++)e[t].length>n&&(n=e[t].length);return Array.from(Array(n)).map((function(n,t){return e.map((function(e){var n=e.channels,r=e.notes,a=e.noteDuration,o=e.transpose,c=e.velocity;return{channels:n,duration:a,note:r[t].note+o,on:r[t].on,velocity:c}}))}))},P=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=c.useState(e.reduce((function(e,t){return e[t.name]=n[t.name]||t.defaultValue,e}),{})),r=(0,a.Z)(t,2),l=r[0],i=r[1],s=c.useCallback((function(e,n){return i((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,k.Z)({},e,n))}))}),[]);return{onSetParameter:s,parameters:l}},M={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M347.6 528.95l383.2 301.02c14.25 11.2 35.2 1.1 35.2-16.95V210.97c0-18.05-20.95-28.14-35.2-16.94L347.6 495.05a21.53 21.53 0 000 33.9M330 864h-64a8 8 0 01-8-8V168a8 8 0 018-8h64a8 8 0 018 8v688a8 8 0 01-8 8"}}]},name:"step-backward",theme:"outlined"},R=t(4291),V=function(e,n){return c.createElement(R.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:n,icon:M}))};V.displayName="StepBackwardOutlined";var A=c.forwardRef(V),G={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},T=function(e,n){return c.createElement(R.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:n,icon:G}))};T.displayName="CaretRightOutlined";var L=c.forwardRef(T),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"},B=function(e,n){return c.createElement(R.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:n,icon:_}))};B.displayName="PauseOutlined";var z=c.forwardRef(B),W=t(3433),q=t(9333),$=t(7462),F=t(1694),U=t.n(F),Y=t(5179),H=t(1354),J=c.forwardRef((function(e,n){var t,r=e.prefixCls,o=void 0===r?"rc-switch":r,l=e.className,s=e.checked,u=e.defaultChecked,d=e.disabled,m=e.loadingIcon,f=e.checkedChildren,v=e.unCheckedChildren,p=e.onClick,h=e.onChange,g=e.onKeyDown,y=(0,i.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),b=(0,Y.Z)(!1,{value:s,defaultValue:u}),C=(0,a.Z)(b,2),x=C[0],Z=C[1];function N(e,n){var t=x;return d||(Z(t=e),null===h||void 0===h||h(t,n)),t}var w=U()(o,l,(t={},(0,k.Z)(t,"".concat(o,"-checked"),x),(0,k.Z)(t,"".concat(o,"-disabled"),d),t));return c.createElement("button",Object.assign({},y,{type:"button",role:"switch","aria-checked":x,disabled:d,className:w,ref:n,onKeyDown:function(e){e.which===H.Z.LEFT?N(!1,e):e.which===H.Z.RIGHT&&N(!0,e),null===g||void 0===g||g(e)},onClick:function(e){var n=N(!x,e);null===p||void 0===p||p(n,e)}}),m,c.createElement("span",{className:"".concat(o,"-inner")},x?f:v))}));J.displayName="Switch";var K=J,Q=t(7106),X=t(2833),ee=t(3785),ne=t(1815),te=t(4824),re=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},ae=c.forwardRef((function(e,n){var t,r=e.prefixCls,a=e.size,o=e.loading,l=e.className,i=void 0===l?"":l,s=e.disabled,u=re(e,["prefixCls","size","loading","className","disabled"]);(0,te.Z)("checked"in u||!("value"in u),"Switch","`value` is not a valid prop, do you mean `checked`?");var d=c.useContext(ee.E_),m=d.getPrefixCls,f=d.direction,v=c.useContext(ne.Z),p=m("switch",r),h=c.createElement("div",{className:"".concat(p,"-handle")},o&&c.createElement(Q.Z,{className:"".concat(p,"-loading-icon")})),g=U()((t={},(0,k.Z)(t,"".concat(p,"-small"),"small"===(a||v)),(0,k.Z)(t,"".concat(p,"-loading"),o),(0,k.Z)(t,"".concat(p,"-rtl"),"rtl"===f),t),i);return c.createElement(X.Z,{insertExtraNode:!0},c.createElement(K,(0,$.Z)({},u,{prefixCls:p,className:g,disabled:s||o,ref:n,loadingIcon:h})))}));ae.__ANT_SWITCH=!0,ae.displayName="Switch";var oe=ae,ce=t(1002),le=t(3241),ie=t(1938),se=t(5033),ue=t(7309),de=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},me=ue.Z.Group,fe=function(e){var n=c.useContext(ee.E_),t=n.getPopupContainer,r=n.getPrefixCls,o=n.direction,l=e.prefixCls,i=e.type,s=void 0===i?"default":i,u=e.disabled,d=e.loading,m=e.onClick,f=e.htmlType,v=e.children,p=e.className,h=e.overlay,g=e.trigger,y=e.align,b=e.visible,C=e.onVisibleChange,x=e.placement,Z=e.getPopupContainer,N=e.href,k=e.icon,w=void 0===k?c.createElement(se.Z,null):k,j=e.title,E=e.buttonsRender,O=void 0===E?function(e){return e}:E,D=e.mouseEnterDelay,I=e.mouseLeaveDelay,S=e.overlayClassName,P=e.overlayStyle,M=e.destroyPopupOnHide,R=de(e,["prefixCls","type","disabled","loading","onClick","htmlType","children","className","overlay","trigger","align","visible","onVisibleChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide"]),V=r("dropdown-button",l),A={align:y,overlay:h,disabled:u,trigger:u?[]:g,onVisibleChange:C,getPopupContainer:Z||t,mouseEnterDelay:D,mouseLeaveDelay:I,overlayClassName:S,overlayStyle:P,destroyPopupOnHide:M};"visible"in e&&(A.visible=b),A.placement="placement"in e?x:"rtl"===o?"bottomLeft":"bottomRight";var G=O([c.createElement(ue.Z,{type:s,disabled:u,loading:d,onClick:m,htmlType:f,href:N,title:j},v),c.createElement(ue.Z,{type:s,icon:w})]),T=(0,a.Z)(G,2),L=T[0],_=T[1];return c.createElement(me,(0,$.Z)({},R,{className:U()(V,p)}),L,c.createElement(be,A,_))};fe.__ANT_BUTTON=!0;var ve=fe,pe=t(9393),he=t(1113),ge=t(9631),ye=((0,pe.b)("topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight","top","bottom"),function(e){var n,t=c.useContext(ee.E_),r=t.getPopupContainer,a=t.getPrefixCls,o=t.direction,l=e.arrow,i=e.prefixCls,s=e.children,u=e.trigger,d=e.disabled,m=e.getPopupContainer,f=e.overlayClassName,v=a("dropdown",i),p=c.Children.only(s),h=(0,he.Tm)(p,{className:U()("".concat(v,"-trigger"),(0,k.Z)({},"".concat(v,"-rtl"),"rtl"===o),p.props.className),disabled:d}),g=U()(f,(0,k.Z)({},"".concat(v,"-rtl"),"rtl"===o)),y=d?[]:u;y&&-1!==y.indexOf("contextMenu")&&(n=!0);var b=(0,ge.Z)({arrowPointAtCenter:"object"===(0,ce.Z)(l)&&l.pointAtCenter,autoAdjustOverflow:!0});return c.createElement(le.Z,(0,$.Z)({alignPoint:n},e,{builtinPlacements:b,arrow:!!l,overlayClassName:g,prefixCls:v,getPopupContainer:m||r,transitionName:function(){var n=a(),t=e.placement,r=void 0===t?"":t,o=e.transitionName;return void 0!==o?o:r.indexOf("top")>=0?"".concat(n,"-slide-down"):"".concat(n,"-slide-up")}(),trigger:y,overlay:function(){return function(n){var t,r=e.overlay;t="function"===typeof r?r():r;var a=(t=c.Children.only("string"===typeof t?c.createElement("span",null,t):t)).props;(0,te.Z)(!a.mode||"vertical"===a.mode,"Dropdown",'mode="'.concat(a.mode,"\" is not supported for Dropdown's Menu."));var o=a.selectable,l=void 0!==o&&o,i=a.expandIcon,s="undefined"!==typeof i&&c.isValidElement(i)?i:c.createElement("span",{className:"".concat(n,"-menu-submenu-arrow")},c.createElement(ie.Z,{className:"".concat(n,"-menu-submenu-arrow-icon")}));return"string"===typeof t.type?t:(0,he.Tm)(t,{mode:"vertical",selectable:l,expandIcon:s})}(v)},placement:function(){var n=e.placement;if(!n)return"rtl"===o?"bottomRight":"bottomLeft";if(n.includes("Center")){var t=n.slice(0,n.indexOf("Center"));return(0,te.Z)(!n.includes("Center"),"Dropdown","You are using '".concat(n,"' placement in Dropdown, which is deprecated. Try to use '").concat(t,"' instead.")),t}return n}()}),h)});ye.Button=ve,ye.defaultProps={mouseEnterDelay:.15,mouseLeaveDelay:.1};var be=ye,Ce=be,xe=["channels"],Ze=function(e){var n=e.channels,t=e.numOfChannels,r=e.onSetData,l=e.title,u=void 0===l?"Channels":l,d=c.useState(!1),m=(0,a.Z)(d,2),f=m[0],v=m[1],p=c.useCallback((function(){return v(!0)}),[v]),h=c.useCallback((function(e,n){return r((function(t){var r=t.channels,a=(0,i.Z)(t,xe);return(0,o.Z)((0,o.Z)({},a),{},{channels:n?Array.from(new Set([].concat((0,W.Z)(r),[e]))).sort((function(e,n){return e>n?1:e<n?-1:0})):r.filter((function(n){return n!==e}))})}))}),[t,r]),g=c.useMemo((function(){return(0,s.jsx)(q.Z,{className:"midi-channels-menu",onClick:p,children:Array.from(Array(t)).map((function(e,t){return(0,s.jsx)(q.Z.Item,{children:(0,s.jsxs)("div",{className:"menu-item",children:[(0,s.jsxs)("div",{children:[t+1," "]}),(0,s.jsx)(oe,{checked:n.includes(t+1),onChange:function(e){return h(t+1,e)},size:"small"})]})},t+1)}))})}),[n,t]),y=c.useMemo((function(){if(!n)return"";var e=n.reduce((function(e,n){return e.range.length>0&&n-e.range[e.range.length-1]>1?e.other.push(n):e.range.push(n),e}),{range:[],other:[]}),t=e.range,r=e.other;return t.length>1?"".concat(t[0],"-").concat(t[t.length-1]).concat(r.length>0?"..":""):[].concat((0,W.Z)(t),(0,W.Z)(r)).filter((function(e,n){return n<3})).join(",")+(r.length>2?"..":"")}),[n]);return(0,s.jsx)("div",{className:"midi-channels",children:(0,s.jsx)(Ce,{onVisibleChange:v,overlay:g,placement:"bottomRight",visible:f,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"title",children:u}),(0,s.jsx)("div",{className:"content",children:y})]})})})},Ne=t(4896),ke=Object.keys(Z).map((function(e){return(0,o.Z)((0,o.Z)({},Z[e]),{},{name:e})})),we=function(e){var n=e.activeNoteIdx,t=e.data,r=e.onSetData,a=t.noteDuration,u=t.transpose,d=c.useMemo((function(){return{noteDuration:a,transpose:u}}),[a,u]),m=P(ke,d),v=m.parameters,p=m.onSetParameter;c.useEffect((function(){return r((function(e){return(0,o.Z)((0,o.Z)({},e),v)}))}),[v]);var h,g=(h=r,{onClick:c.useCallback((function(e){return h((function(n){var t=n.notes,r=(0,i.Z)(n,E);return(0,o.Z)((0,o.Z)({},r),{},{notes:t.map((function(n,t){return t===e?(0,o.Z)((0,o.Z)({},n),{},{on:!n.on}):n}))})}))}),[h]),onWheel:c.useCallback((function(e,n){return h((function(t){var r=t.notes,a=(0,i.Z)(t,O);return(0,o.Z)((0,o.Z)({},a),{},{notes:r.map((function(t,r){return r===e?(0,o.Z)((0,o.Z)({},t),{},{note:"up"===n?t.note+1:t.note-1}):t}))})}))}),[h])});return(0,s.jsxs)("div",{className:"step-sequencer",children:[(0,s.jsx)("div",{className:"controls",children:(0,s.jsxs)(l.Z,{bordered:!1,children:[(0,s.jsx)(Ze,{channels:null===t||void 0===t?void 0:t.channels,numOfChannels:Ne.J5,onSetData:r,title:"Channels"}),ke.map((function(e){return(0,c.createElement)(y,(0,o.Z)((0,o.Z)({},e),{},{key:e.name,onSetParameter:p,value:v[e.name]}))}))]})}),(0,s.jsx)("div",{className:"pads-container",children:Array.isArray(null===t||void 0===t?void 0:t.notes)&&t.notes.map((function(e,t){var r=e.note,a=e.on;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f,(0,o.Z)((0,o.Z)({active:n===t,index:t,on:a},g),{},{children:(0,b.Qz)(r)}),r),(t+1)%8===0&&(0,s.jsx)("div",{className:"flex-breaker"})]})}))})]})},je=[1,2,3,4],Ee=Object.keys(N).map((function(e){return(0,o.Z)((0,o.Z)({},N[e]),{},{name:e})})),Oe=function(){var e=c.useState([{channels:je,noteDuration:x.noteDuration,notes:x.notes.map((function(e){return{note:e,on:!0}})),transpose:0,velocity:50}]),n=(0,a.Z)(e,2),t=n[0],r=n[1],u=c.useState(0),m=(0,a.Z)(u,2),f=m[0],v=(m[1],c.useCallback((function(e){var n="function"===typeof e?e:function(){return e};r((function(e){return e.map((function(e,t){return t===f?n(e):e}))}))}),[r,f])),p=P(Ee),h=p.parameters,g=p.onSetParameter,b=function(e,n,t){var r=e.bpm,l=e.noteValue,s=(0,i.Z)(e,D),u=c.useContext(w.Z),d=u.selectedOutput,m=c.useState(null),f=(0,a.Z)(m,2),v=f[0],p=f[1],h=c.useRef((0,o.Z)((0,o.Z)({},s),{},{intervalId:null,intervalMillis:I(r,l),noteIdx:0,steps:S(n),tempoChangeRequested:null}));c.useEffect((function(){null!==h.current.intervalId?h.current.tempoChangeRequested=I(r,l):h.current.intervalMillis=I(r,l)}),[r,l]),c.useEffect((function(){Object.keys(s).forEach((function(e){h.current[e]=s[e]}))}),[s]),c.useEffect((function(){h.current.steps=S(n)}),[n]);var g=c.useCallback((function(){var e=h.current,n=e.steps,t=e.noteIdx,r=e.tempoChangeRequested;r&&(clearInterval(h.current.intervalId),h.current.intervalMillis=r,h.current.tempoChangeRequested=null,h.current.intervalId=setInterval(g,r));var a=n[t];p(t),h.current.noteIdx++,h.current.noteIdx>=n.length&&(h.current.noteIdx=0);var o=a.reduce((function(e,n){var t=n.channels,r=n.duration,a=n.note,o=n.on,c=n.velocity;return o&&c>0&&t.forEach((function(n){e.messages.push([j.XR["Channel".concat(n,"NoteOn")],a,c]),e.messagesOffGroups[r]||(e.messagesOffGroups[r]=[]),e.messagesOffGroups[r].push([j.XR["Channel".concat(n,"NoteOn")],a,0])})),e}),{messages:[],messagesOffGroups:{}}),c=o.messages,l=o.messagesOffGroups;c.length&&(c.forEach((function(e){return d.send(e)})),Object.keys(l).forEach((function(e){var n=l[e];setTimeout((function(){return n.forEach((function(e){return d.send(e)}))}),e)})))}),[d]);c.useEffect((function(){return t&&null!==u&&void 0!==u&&u.ready&&u.selectedOutput&&(h.current.intervalId=setInterval(g,intervalMillis)),function(){clearInterval(h.current.intervalId),h.current.intervalId=null}}),[t]);var y=c.useCallback((function(){p(0),h.current.noteIdx=0}),[p]);return{activeNoteIdx:v,onPlay:c.useCallback((function(){null===h.current.intervalId&&(h.current.intervalId=setInterval(g,h.current.intervalMillis))}),[g]),onSeekToStart:y,onStop:c.useCallback((function(){clearInterval(h.current.intervalId),h.current.intervalId=null}),[])}}(h,t),C=b.activeNoteIdx,Z=b.onSeekToStart,N=b.onPlay,k=b.onStop;return(0,s.jsxs)("div",{className:"sequencer",children:[(0,s.jsx)("div",{className:"global-controls",children:(0,s.jsxs)(l.Z,{bordered:!1,children:[(0,s.jsxs)("div",{className:"control-row",children:[(0,s.jsx)(d,{onClick:Z,children:(0,s.jsx)(A,{})}),(0,s.jsx)(d,{onClick:N,children:(0,s.jsx)(L,{})}),(0,s.jsx)(d,{onClick:k,children:(0,s.jsx)(z,{})})]}),(0,s.jsx)("div",{className:"control-row",children:Ee.map((function(e){return(0,c.createElement)(y,(0,o.Z)((0,o.Z)({},e),{},{key:e.name,onSetParameter:g,value:h[e.name]}))}))})]})}),(0,s.jsx)("div",{className:"step-sequencer",children:(0,s.jsx)(we,{activeNoteIdx:C,data:t[f],onSetData:v})})]})}}}]);
//# sourceMappingURL=947.0791390f.chunk.js.map