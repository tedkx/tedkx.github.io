"use strict";(self.webpackChunkmidi_playground=self.webpackChunkmidi_playground||[]).push([[72],{1099:function(e,n,t){t.d(n,{PW:function(){return o},Qz:function(){return s},f5:function(){return i},mr:function(){return l}});var r=t(9439),a=t(4896),s=function(e){var n=Math.floor(e/a.$c.length),t=e%a.$c.length;return"".concat(a.$c[t]).concat(n)},o=function(e){var n=(e||"").match(/(.{1,2})(\d{1})/)||[],t=(0,r.Z)(n,3),s=(t[0],t[1]),o=t[2];return s&&o?parseInt(o)*a.$c.length+a.$c.findIndex((function(e){return e===s.toUpperCase()})):null},l=function(e){return e[0]>=a.wm&&e[0]<=a.wm+a.J5&&e[2]>0},i=function(e){return e[0]>=a.$Z&&e[0]<=a.$Z+a.J5||e[0]>=a.wm&&e[0]<=a.wm+a.J5&&0===e[2]}},5072:function(e,n,t){t.r(n),t.d(n,{default:function(){return de}});var r=t(1413),a=t(5987),s=t(9439),o=t(2791),l=t(1099),i={lawless:{bpm:90,stepSequencers:[{channels:[1],noteDuration:30,notes:"C4 G4 C5 D#5 D5 C5 D5 D#5 G5 D#5 D5 C5 G4 F4 D#4 D4 C6 C6 C6 C5 C5 C5 C6 C6 C6 G5 D#5 D5 C5 G4 D#4 D4"}],noteValue:16},theGrid:{bpm:138,stepSequencers:[{channels:[1,2,3,4],noteDuration:100,notes:"G3 D4 G4 C5 D5 D#4 G4 A#4 D#5 F5 B3 G4 G#4 D5 D#5 F5 G5 G3 D4 G4 C5 D5 F4 G4 A#4 D#5 F5 C4 G4 G#4 D5 D#5"}],noteValue:16},newMaps:{bpm:120,stepSequencers:[{channels:[1,2,3,4],noteDuration:600,notes:"C5 A#4 C5 G#5:90 C#5 G#4 D#5 C5 A#4 G#5:90 C5 G#4 C#5 D#5 A#4 C5 G#5:90 G#5:0 C5 A#4 C5 G#5 C5 A#4 C5 G#5:90 C#5 G#4 D#5 C5 A#4 G5:90 C5 G#4 C#5 D#5 A#4 C#5 A#5:90 A#5:0 C5 A#4 C5 G#5:90 C#5 G#4 D#5 C5 A#4 G#5:90 C5 G#4 C#5 D#5 A#4 C5 G#5:90 G#5:0 C5 A#4 C5 G#5 C5 A#4 C5 G#5:90 C#5 G#4 D#5 C5 A#4 G5:90 A#4 G#4 C#5 D#5 A#4 C#5 C6:90 C6:0"}],noteValue:16,velocity:54},metropolis:{bpm:120,noteValue:16,stepSequencers:[{channels:[1],noteDuration:100,notes:"C5 G5 D6 C7 B6 F6 E5 B5 F#6 F7 E7 A#6 D7 C#7 A6 C7 B6 G#6"},{channels:[1],noteDuration:100,notes:"F5 C6 G6 F7 E7 A#6 A5 E6 B6 A#7 A7 D#7 G7 F#7 D7 F7 E7 C#7"}]},aintNobody:{bpm:100,noteValue:16,stepSequencers:[{channels:[1],noteDuration:100,notes:"D#3 A#3 C#4 D#4 D#4 A#4 C#5 D#5 D#6"},{channels:[1],noteDuration:100,notes:"x x x x F#6:100 x F#6:100 x F#6:100 D#6:100 A#5:100 G#6:100 x G#6:100 F6:100 C#6:100"}]}},u=["stepSequencers"],c=["notes"],d=(0,l.PW)("C5"),f=function(e,n,t,r,a){return{centerBased:!0===a,defaultValue:t,max:n,min:e,title:r}},v=function(e){var n=e.stepSequencers,t=(0,a.Z)(e,u);return(0,r.Z)((0,r.Z)({},t),{},{stepSequencers:n.map((function(e){var n=e.notes,o=(0,a.Z)(e,c);return(0,r.Z)((0,r.Z)({},o),{},{transpose:0,notes:n.split(" ").map((function(e){var n=e.split(":"),r=(0,s.Z)(n,2),a=r[0],o=r[1],i="x"===a,u=i?0:parseInt(o);return{note:i?null:(0,l.PW)(a),on:0!==u,velocity:isNaN(u)?t.velocity||64:u}}))})}))})}(i.aintNobody),m={noteDuration:f(1,1e3,v.noteDuration,"Note Duration"),transpose:f(-24,24,0,"Transpose",!0)},h={bpm:f(40,280,v.bpm,"Tempo"),noteValue:f(1,32,v.noteValue,"NoteValue")},C=t(4942),p=t(6270),x=t(7269),g=function(e,n){return e*n/gcd(e,n)},j=["notes"],y=["notes"],Z=["bpm","noteValue"],k=function(e,n){return 6e4/e*4/n},b=function(e,n,t){var l=e.bpm,i=e.noteValue,u=(0,a.Z)(e,Z),c=o.useContext(p.Z),d=c.selectedOutput,f=o.useState(null),v=(0,s.Z)(f,2),m=v[0],h=v[1],C=o.useRef((0,r.Z)((0,r.Z)({},u),{},{intervalId:null,intervalMillis:k(l,i),stepIdx:0,sequencersData:[],tempoChangeRequested:null,totalSteps:0}));o.useEffect((function(){null!==C.current.intervalId?C.current.tempoChangeRequested=k(l,i):C.current.intervalMillis=k(l,i)}),[l,i]),o.useEffect((function(){Object.keys(u).forEach((function(e){C.current[e]=u[e]}))}),[u]),o.useEffect((function(){if(Array.isArray(n)){C.current.sequencersData=n;var e=Array.from(new Set(n.map((function(e){return e.notes.length}))));C.current.totalSteps=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.slice(1).reduce((function(e,n){return g(e,n)}),n[0])}(e)}}),[n]);var j=o.useCallback((function(){var e=C.current,n=e.sequencersData,t=e.stepIdx,r=e.tempoChangeRequested,a=e.totalSteps;r&&(clearInterval(C.current.intervalId),C.current.intervalMillis=r,C.current.tempoChangeRequested=null,C.current.intervalId=setInterval(j,r)),h(t),C.current.stepIdx++,C.current.stepIdx>=a&&(C.current.stepIdx=0);var s=n.reduce((function(e,n){var r=n.channels,a=n.noteDuration,s=n.notes,o=n.transpose,l=s[t%s.length],i=l.note,u=l.on,c=l.velocity;return u&&c>0&&r.forEach((function(n){var t=i+o;e.messages.push([x.XR["Channel".concat(n,"NoteOn")],t,c]),e.messagesOffGroups[a]||(e.messagesOffGroups[a]=[]),e.messagesOffGroups[a].push([x.XR["Channel".concat(n,"NoteOn")],t,0])})),e}),{messages:[],messagesOffGroups:{}}),o=s.messages,l=s.messagesOffGroups;o.length&&(o.forEach((function(e){return d.send(e)})),Object.keys(l).forEach((function(e){var n=l[e];setTimeout((function(){return n.forEach((function(e){return d.send(e)}))}),e)})))}),[d]);o.useEffect((function(){return t&&null!==c&&void 0!==c&&c.ready&&c.selectedOutput&&(C.current.intervalId=setInterval(j,intervalMillis)),function(){clearInterval(C.current.intervalId),C.current.intervalId=null}}),[t]);var y=o.useCallback((function(){h(0),C.current.stepIdx=0}),[h]);return{activeNoteIdx:m,onPlay:o.useCallback((function(){null===C.current.intervalId&&(C.current.intervalId=setInterval(j,C.current.intervalMillis))}),[j]),onSeekToStart:y,onStop:o.useCallback((function(){clearInterval(C.current.intervalId),C.current.intervalId=null}),[])}},D=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=o.useState(e.reduce((function(e,t){return e[t.name]=n[t.name]||t.defaultValue,e}),{})),a=(0,s.Z)(t,2),l=a[0],i=a[1],u=o.useCallback((function(e,n){return i((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,C.Z)({},e,n))}))}),[]);return{onSetParameter:u,parameters:l}},w=t(184),S=["children","className","index","onClick"],N=function(e){var n=e.children,t=e.className,s=(e.index,e.onClick),o=(0,a.Z)(e,S);return(0,w.jsxs)("div",(0,r.Z)((0,r.Z)({className:"keyboard-button ".concat(t),onClick:s},o),{},{children:[(0,w.jsx)("div",{className:"button-overlay"}),(0,w.jsx)("div",{className:"button-inner",children:n})]}))},G=["active","children","className","index","on","onClick","onWheel"],M=function(e){var n=e.active,t=e.children,s=e.className,l=e.index,i=e.on,u=e.onClick,c=e.onWheel,d=(0,a.Z)(e,G),f=o.useCallback((function(e){u&&u(l,i,e)}),[l,i,u]),v=o.useCallback((function(e){c&&c(l,e.deltaY<0?"up":"down",e)}),[l,c]);return(0,w.jsxs)("div",(0,r.Z)((0,r.Z)({className:"keyboard-pad ".concat(s," ").concat(n&&"active"," ").concat(i&&"on"),onClick:f,onWheel:v},d),{},{children:[(0,w.jsx)("div",{className:"pad-overlay"}),(0,w.jsx)("div",{className:"pad-inner",children:t})]}))},E=t(763),A=-144,I=function(e){var n=e.centerBased,t=e.className,a=e.displayValue,l=e.max,i=e.min,u=e.style,c=e.title,d=e.value,f=o.useMemo((function(){return function(e,n,t){var r=288*(e-n)/(t-n)+A;return Math.max(A,Math.min(144,r))}(d,i,l)}),[d,i,l]),v=function(e){var n=e.max,t=e.min,r=e.onSetValue,a=e.step,s=void 0===a?1:a,l=e.value,i=o.useRef({factor:1,max:n,min:t,step:s,value:l}),u=o.useRef();o.useEffect((function(){i.current.step=s,i.current.value=l,i.current.min=t,i.current.max=n}),[l,s,t,n]);var c=o.useMemo((function(){return(0,E.debounce)((function(){i.current.factor=i.current.step}),25)}),[]);return o.useEffect((function(){var e=function(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();var n=i.current,t=n.value,a=n.step,s=n.min,o=n.max,l=t+a*i.current.factor*(e.deltaY<0?1:-1);r(Math.min(o,Math.max(s,l))),i.current.factor+=a,c()};return u.current.addEventListener("wheel",e,{passive:!1}),function(){u.current&&u.current.removeEventListener("wheel",e,{passive:!1})}}),[]),{elementRef:u}}(e),m=(v.onWheel,v.elementRef),h=function(e){var n=e.max,t=e.min,r=e.onSetValue,a=e.value,l=o.useRef({y:null,mouseMovelistener:null,mouseUplistener:null,mouseDown:!1,value:a}),i=o.useState(!1),u=(0,s.Z)(i,2),c=u[0],d=u[1];o.useEffect((function(){l.current.value=a}),[a]);var f=o.useCallback((function(e){0===e.button&&(d(!1),window.removeEventListener("mousemove",l.current.mouseMovelistener),window.removeEventListener("mouseup",l.current.mouseUplistener),l.current.listener=null)}),[d]),v=o.useCallback((function(e){var a=Math.min(n,Math.max(t,l.current.value+l.current.y-e.pageY));l.current.y=e.pageY,r(a)}),[r,t,n]);return{dragging:c,onMouseDown:o.useCallback((function(e){0===e.button&&(d(!0),l.current.y=e.pageY,l.current.mouseMovelistener=v,l.current.mouseUplistener=f,window.addEventListener("mousemove",l.current.mouseMovelistener),window.addEventListener("mouseup",l.current.mouseUplistener))}),[])}}(e),C=h.dragging,p=h.onMouseDown;return(0,w.jsxs)("div",{className:"rotary-knob ".concat(a&&"with-value"," ").concat(c&&"with-title"," ").concat(t),style:u,children:[C&&(0,w.jsx)("div",{className:"window-overlay"}),c&&(0,w.jsx)("div",{className:"title",children:c}),(0,w.jsx)("div",{className:"knob-overlay",onMouseDown:p,ref:m}),(0,w.jsxs)("div",{className:"knob-inner",children:[(0,w.jsx)("div",{className:"marker",style:{transform:"rotate(".concat(f,"deg)")}}),(0,w.jsx)("div",{className:"ticks",children:Array.from(Array(25)).map((function(e,t){return(0,w.jsx)("div",(0,r.Z)({},function(e,n,t){var r=A+12*e;return{className:"tick ".concat((t?n<0?r<=0&&r>=n:r>=0&&r<=n:n>A&&r<=n)&&"active"),key:e,style:{transform:"rotate(".concat(r,"deg)")}}}(t,f,n)),t)}))})]}),a&&(0,w.jsx)("div",{className:"value-wrap",children:(0,w.jsx)("div",{className:"value-display",children:d})})]})},O=["name","onSetParameter"],q=function(e){var n=e.name,t=e.onSetParameter,s=(0,a.Z)(e,O),l=o.useCallback((function(e){return t(n,e)}),[n,t]);return(0,w.jsx)("div",{className:"parameter-knob",children:(0,w.jsx)(I,(0,r.Z)({displayValue:!0,onSetValue:l},s))})},V=t(915),z=t(464),P=t(3382),F=t(938),L=t(7864),R={opacity:.9,fill:"#000",fillOpacity:1,fillRule:"evenodd",stroke:"none",strokeWidth:.2,strokeMiterlimit:4,strokeDashoffset:0,strokeOpacity:1},W={fill:"none",fillOpacity:.75,fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},B={fill:"#000",fillOpacity:1,fillRule:"evenodd",stroke:"none",strokeWidth:"1px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeOpacity:1},$=function(e){return(0,o.useMemo)((function(){return{flagStyle:(0,r.Z)((0,r.Z)({},B),{},{fill:e}),headStyle:(0,r.Z)((0,r.Z)({},R),{},{fill:e}),stemStyle:(0,r.Z)((0,r.Z)({},W),{},{stroke:e})}}),[e])},T=function(e){var n=e.color,t=$(void 0===n?"#000":n).headStyle;return(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"19.5",height:"11.003",id:"svg1437",children:[(0,w.jsx)("defs",{id:"defs1440"}),(0,w.jsx)("path",{d:"M 9.125,0.0030002594 C 4.03428,0.18520026 0,2.5856003 0,5.5030003 C 0,8.5390003 4.368,11.003 9.75,11.003 C 15.132,11.003 19.5,8.5390003 19.5,5.5030003 C 19.5,2.4670003 15.132,0.0030002594 9.75,0.0030002594 C 9.53977,0.0030002594 9.33194,-0.0043997406 9.125,0.0030002594 z M 7.5,1.0655003 C 8.8579,0.92650026 10.56798,1.5561003 12,2.8467003 C 14.14502,4.7799003 14.87122,7.4906003 13.625,8.9092003 L 13.59375,8.9405003 C 12.32289,10.3506 9.53145,9.9153003 7.375,7.9717003 C 5.21855,6.0282003 4.51039,3.2881003 5.78125,1.8780003 C 6.20818,1.4043003 6.81306,1.1358003 7.5,1.0655003 z ",style:t,id:"path3937"})]})},U=function(e){var n=e.color,t=$(void 0===n?"#000":n),r=t.headStyle,a=t.stemStyle;return(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"14.566",height:"41.919998",id:"svg1463",children:[(0,w.jsx)("defs",{id:"defs1466"}),(0,w.jsxs)("g",{transform:"matrix(-1,0,0,-1,247.8306,258.8548)",id:"g10997",children:[(0,w.jsx)("path",{d:"M 237.68484,218.18353 C 234.289,220.0035 232.47956,223.29808 233.59262,225.77649 C 234.77988,228.42013 238.85963,229.16621 242.6992,227.44186 C 246.53876,225.7175 248.69136,222.17246 247.5041,219.52883 C 246.31683,216.88519 242.23709,216.13911 238.39752,217.86346 C 238.15755,217.97123 237.91124,218.0622 237.68484,218.18353 z M 238.79457,220.42569 C 239.0358,220.30136 239.28005,220.20766 239.53576,220.09282 C 242.80883,218.62288 245.96997,218.55375 246.59187,219.93851 C 247.21377,221.32327 245.06209,223.64013 241.78902,225.11008 C 238.51594,226.58002 235.3548,226.64915 234.73291,225.26439 C 234.15959,223.98781 235.94804,221.89278 238.79457,220.42569 z ",style:r,id:"path10999"}),(0,w.jsx)("path",{d:"M 234.05234,224.51692 L 234.05234,258.10449",style:a,id:"path11001"})]})]})},Y=function(e){var n=e.color,t=$(void 0===n?"#000":n),r=t.headStyle,a=t.stemStyle;return(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"14.566",height:"41.919998",id:"svg1497",children:[(0,w.jsx)("defs",{id:"defs1500"}),(0,w.jsxs)("g",{transform:"matrix(-1,0,0,-1,313.2829,340.3223)",id:"g11029",children:[(0,w.jsx)("path",{d:"M 303.13715,299.65106 C 299.74131,301.47103 297.93187,304.76561 299.04493,307.24402 C 300.23219,309.88766 304.31194,310.63374 308.15151,308.90939 C 311.99107,307.18503 314.14367,303.63999 312.95641,300.99636 C 311.76914,298.35272 307.6894,297.60664 303.84983,299.33099 C 303.60986,299.43876 303.36355,299.52973 303.13715,299.65106 z ",style:r,id:"path11031"}),(0,w.jsx)("path",{d:"M 299.50465,305.98445 L 299.50465,339.57202",style:a,id:"path11033"})]})]})},J=function(e){var n=e.color,t=$(void 0===n?"#000":n),r=t.flagStyle,a=t.headStyle,s=t.stemStyle;return(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"24.886",height:"41.75",id:"svg1533",children:[(0,w.jsx)("defs",{id:"defs1536"}),(0,w.jsxs)("g",{transform:"translate(-427.1495,-34.28441)",id:"g12994",children:[(0,w.jsx)("path",{d:"M 431.56955,65.847427 C 428.17371,67.667397 426.36427,70.961977 427.47733,73.440387 C 428.66459,76.084027 432.74434,76.830107 436.58391,75.105757 C 440.42347,73.381397 442.57607,69.836357 441.38881,67.192727 C 440.20154,64.549087 436.1218,63.803007 432.28223,65.527357 C 432.04226,65.635127 431.79595,65.726097 431.56955,65.847427 z ",style:a,id:"path12112"}),(0,w.jsx)("path",{d:"M 441.18705,68.62194 L 441.18705,35.03437",style:s,id:"path12114"}),(0,w.jsx)("path",{d:"M 441.1824,35.99421 C 440.6199,42.30671 446.02495,44.56795 448.6824,47.49421 C 451.20836,50.27568 452.13107,53.48393 452.02788,56.48981 C 452.00033,57.29238 451.78245,60.76992 449.41343,64.25653 C 452.58135,55.50942 449.6319,51.99847 446.75047,49.20495 C 443.26053,45.82149 440.66435,42.63277 441.1824,35.99421 z ",style:r,id:"path12116"})]})]})},Q=function(e){var n=e.color,t=$(void 0===n?"#000":n),r=t.flagStyle,a=t.headStyle,s=t.stemStyle;return(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"24.386",height:"45",id:"svg1572",children:[(0,w.jsx)("defs",{id:"defs1575"}),(0,w.jsxs)("g",{transform:"translate(-393.8446,-234.1771)",id:"g16559",children:[(0,w.jsx)("path",{d:"M 398.2646,268.99008 C 394.86876,270.81005 393.05932,274.10463 394.17238,276.58304 C 395.35964,279.22668 399.43939,279.97276 403.27896,278.24841 C 407.11852,276.52405 409.27112,272.97901 408.08386,270.33538 C 406.89659,267.69174 402.81685,266.94566 398.97728,268.67001 C 398.73731,268.77778 398.491,268.86875 398.2646,268.99008 z ",style:a,id:"path16482"}),(0,w.jsx)("path",{d:"M 407.8821,271.76459 L 407.8821,234.92702",style:s,id:"path16484"}),(0,w.jsx)("path",{d:"M 407.37745,235.63686 C 406.81495,241.94936 412.22,244.2106 414.87745,247.13686 C 417.40341,249.91833 418.32612,253.12658 418.22293,256.13246 C 418.19538,256.93503 417.9775,260.41257 415.60848,263.89918 C 418.7764,255.15207 415.82695,251.64112 412.94552,248.8476 C 409.45558,245.46414 406.8594,242.27542 407.37745,235.63686 z ",style:r,id:"path16486"}),(0,w.jsx)("path",{d:"M 407.14399,241.67087 C 406.58149,247.98337 411.98654,250.24461 414.64399,253.17087 C 417.16995,255.95234 418.09266,259.16059 417.98947,262.16647 C 417.96192,262.96904 417.74404,266.44658 415.37502,269.93319 C 418.54294,261.18608 415.59349,257.67513 412.71206,254.88161 C 409.22212,251.49815 406.62594,248.30943 407.14399,241.67087 z ",style:r,id:"path16488"})]})]})},X=function(e){var n=e.color,t=$(void 0===n?"#000":n),r=t.flagStyle,a=t.headStyle,s=t.stemStyle;return(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"24.886",height:"49.174999",id:"svg1622",children:[(0,w.jsx)("defs",{id:"defs1625"}),(0,w.jsxs)("g",{transform:"translate(-519.7849,-288.4558)",id:"g16506",children:[(0,w.jsx)("path",{d:"M 524.20493,327.44378 C 520.80909,329.26375 518.99965,332.55833 520.11271,335.03674 C 521.29997,337.68038 525.37972,338.42646 529.21929,336.70211 C 533.05885,334.97775 535.21145,331.43271 534.02419,328.78908 C 532.83692,326.14544 528.75718,325.39936 524.91761,327.12371 C 524.67764,327.23148 524.43133,327.32245 524.20493,327.44378 z ",style:a,id:"path16453"}),(0,w.jsx)("path",{d:"M 533.82243,330.21829 L 533.82243,289.2061",style:s,id:"path16455"}),(0,w.jsx)("path",{d:"M 533.81778,297.59056 C 533.25528,303.90306 538.66033,306.1643 541.31778,309.09056 C 543.84374,311.87203 544.76645,315.08028 544.66326,318.08616 C 544.63571,318.88873 544.41783,322.36627 542.04881,325.85288 C 545.21673,317.10577 542.26728,313.59482 539.38585,310.8013 C 535.89591,307.41784 533.29973,304.22912 533.81778,297.59056 z ",style:r,id:"path16457"}),(0,w.jsx)("path",{d:"M 533.08432,302.37457 C 532.52182,308.68707 537.92687,310.94831 540.58432,313.87457 C 543.11028,316.65604 544.03299,319.86429 543.9298,322.87017 C 543.90225,323.67274 543.68437,327.15028 541.31535,330.63689 C 544.48327,321.88978 541.53382,318.37883 538.65239,315.58531 C 535.16245,312.20185 532.56627,309.01313 533.08432,302.37457 z ",style:r,id:"path16462"}),(0,w.jsx)("path",{d:"M 533.59854,290.64238 C 533.03604,296.95488 538.44109,299.21612 541.09854,302.14238 C 543.6245,304.92385 544.54721,308.1321 544.44402,311.13798 C 544.41647,311.94055 544.19859,315.41809 541.82957,318.9047 C 544.99749,310.15759 542.04804,306.64664 539.16661,303.85312 C 535.67667,300.46966 533.08049,297.28094 533.59854,290.64238 z ",style:r,id:"path16504"})]})]})},_=[{label:(0,w.jsx)(T,{color:"#EEE"}),value:1},{label:(0,w.jsx)(U,{color:"#EEE"}),value:2},{label:(0,w.jsx)(Y,{color:"#EEE"}),value:4},{label:(0,w.jsx)(J,{color:"#EEE"}),value:8},{label:(0,w.jsx)(Q,{color:"#EEE"}),value:16},{label:(0,w.jsx)(X,{color:"#EEE"}),value:32}],H=Object.keys(h).map((function(e){return(0,r.Z)((0,r.Z)({},h[e]),{},{name:e})})),K=function(e){var n=e.onPlay,t=e.onSeekToStart,a=e.onSetParameter,s=e.onStop,o=e.parameters;return(0,w.jsx)("div",{className:"global-controls",children:(0,w.jsxs)(V.Z,{bordered:!1,children:[(0,w.jsxs)("div",{className:"control-row",children:[(0,w.jsx)(N,{onClick:t,children:(0,w.jsx)(P.Z,{})}),(0,w.jsx)(N,{onClick:n,children:(0,w.jsx)(F.Z,{})}),(0,w.jsx)(N,{onClick:s,children:(0,w.jsx)(L.Z,{})})]}),(0,w.jsxs)("div",{className:"control-row",children:[(0,w.jsx)(q,(0,r.Z)((0,r.Z)({},h.bpm),{},{name:"bpm",onSetParameter:a,value:o.bpm})),(0,w.jsx)(z.Z,{className:"note-value-select",dropdownClassName:"note-value-select-list",listHeight:280,onSelect:function(e){return a("noteValue",e)},options:_,size:"large"})]})]})})},ee=t(3433),ne=t(9333),te=t(5581),re=t(7382),ae=function(e){var n=e.channels,t=e.numOfChannels,r=e.onSetChannels,a=e.title,l=void 0===a?"Channels":a,i=o.useState(!1),u=(0,s.Z)(i,2),c=u[0],d=u[1],f=o.useCallback((function(){return d(!0)}),[d]),v=o.useCallback((function(e,t){return r(t?Array.from(new Set([].concat((0,ee.Z)(n),[e]))).sort((function(e,n){return e>n?1:e<n?-1:0})):n.filter((function(n){return n!==e})))}),[t,r,n]),m=o.useMemo((function(){return(0,w.jsx)(ne.Z,{className:"midi-channels-menu",onClick:f,children:Array.from(Array(t)).map((function(e,t){return(0,w.jsx)(ne.Z.Item,{children:(0,w.jsxs)("div",{className:"menu-item",children:[(0,w.jsxs)("div",{children:[t+1," "]}),(0,w.jsx)(te.Z,{checked:n.includes(t+1),onChange:function(e){return v(t+1,e)},size:"small"})]})},t+1)}))})}),[n,t]),h=o.useMemo((function(){if(!n)return"";var e=n.reduce((function(e,n){return e.range.length>0&&n-e.range[e.range.length-1]>1?e.other.push(n):e.range.push(n),e}),{range:[],other:[]}),t=e.range,r=e.other;return t.length>1?"".concat(t[0],"-").concat(t[t.length-1]).concat(r.length>0?"..":""):[].concat((0,ee.Z)(t),(0,ee.Z)(r)).filter((function(e,n){return n<3})).join(",")+(r.length>2?"..":"")}),[n]);return(0,w.jsx)("div",{className:"numeric-parameter midi-channels",children:(0,w.jsx)(re.Z,{onVisibleChange:d,overlay:m,placement:"bottomRight",visible:c,children:(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:"title",children:l}),(0,w.jsx)("div",{className:"content",children:h})]})})})},se=t(4896),oe=t(8243),le=function(e){var n=e.notes,t=e.onChange,r=o.useCallback((function(e){var r,a="number"===typeof e?e:Math.max(1,Math.min(120,parseInt(null===(r=e.target)||void 0===r?void 0:r.value)));t(a>n.length?[].concat((0,ee.Z)(n),(0,ee.Z)(Array.from(Array(a-n.length)).map((function(){return function(){return{note:arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,on:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],velocity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:64}}()})))):n.slice(0,a))}),[n,t]);return(0,w.jsxs)("div",{className:"sequence-length-modifier numeric-parameter",children:[(0,w.jsx)("div",{className:"title",children:"# Pads"}),(0,w.jsx)(oe.Z,{bordered:!1,max:120,min:1,onBlur:r,onPressEnter:r,onStep:r,defaultValue:(null===n||void 0===n?void 0:n.length)||1})]})},ie=Object.keys(m).map((function(e){return(0,r.Z)((0,r.Z)({},m[e]),{},{name:e})})),ue=function(e){var n=e.activeNoteIdx,t=e.data,s=e.onSetData,i=t.noteDuration,u=t.transpose,c=o.useMemo((function(){return t&&Array.isArray(t.notes)?n%t.notes.length:n}),[n,t]),d=o.useMemo((function(){return{noteDuration:i,transpose:u}}),[i,u]),f=D(ie,d),v=f.parameters,m=f.onSetParameter;o.useEffect((function(){return s((function(e){return(0,r.Z)((0,r.Z)({},e),v)}))}),[v]);var h,C=o.useCallback((function(e){return s((function(n){return(0,r.Z)((0,r.Z)({},n),{},{notes:e})}))}),[s]),p=o.useCallback((function(e){return s((function(n){return(0,r.Z)((0,r.Z)({},n),{},{channels:e})}))}),[s]),x=(h=s,{onClick:o.useCallback((function(e){return h((function(n){var t=n.notes,s=(0,a.Z)(n,j);return(0,r.Z)((0,r.Z)({},s),{},{notes:t.map((function(n,t){return t===e?(0,r.Z)((0,r.Z)({},n),{},{on:!n.on}):n}))})}))}),[h]),onWheel:o.useCallback((function(e,n){return h((function(t){var s=t.notes,o=(0,a.Z)(t,y);return(0,r.Z)((0,r.Z)({},o),{},{notes:s.map((function(t,a){return a===e?(0,r.Z)((0,r.Z)({},t),{},{note:"up"===n?t.note+1:t.note-1}):t}))})}))}),[h])});return(0,w.jsxs)("div",{className:"step-sequencer",children:[(0,w.jsx)("div",{className:"controls",children:(0,w.jsxs)(V.Z,{bordered:!1,children:[(0,w.jsx)(le,{notes:null===t||void 0===t?void 0:t.notes,onChange:C}),(0,w.jsx)(ae,{channels:null===t||void 0===t?void 0:t.channels,numOfChannels:se.J5,onSetChannels:p,title:"Channels"}),ie.map((function(e){return(0,o.createElement)(q,(0,r.Z)((0,r.Z)({},e),{},{key:e.name,onSetParameter:m,value:v[e.name]}))}))]})}),(0,w.jsx)("div",{className:"pads-container",children:Array.isArray(null===t||void 0===t?void 0:t.notes)&&t.notes.map((function(e,n){var t=e.note,a=e.on;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(M,(0,r.Z)((0,r.Z)({active:c===n,index:n,on:a},x),{},{children:(0,l.Qz)(t)}),t),(n+1)%8===0&&(0,w.jsx)("div",{className:"flex-breaker"})]})}))})]})},ce=["activeNoteIdx"],de=function(){var e=o.useState(v.stepSequencers),n=(0,s.Z)(e,2),t=n[0],l=n[1],i=o.useState(0),u=(0,s.Z)(i,2),c=u[0],d=(u[1],o.useCallback((function(e){var n="function"===typeof e?e:function(){return e};l((function(e){return e.map((function(e,t){return t===c?n(e):e}))}))}),[l,c])),f=D(H),m=f.parameters,h=f.onSetParameter,C=b(m,t),p=C.activeNoteIdx,x=(0,a.Z)(C,ce);return(0,w.jsxs)("div",{className:"sequencer",children:[(0,w.jsx)(K,(0,r.Z)((0,r.Z)({},x),{},{parameters:m,onSetParameter:h})),(0,w.jsx)("div",{className:"step-sequencer",children:(0,w.jsx)(ue,{activeNoteIdx:p,data:t[c],onSetData:d})})]})}}}]);
//# sourceMappingURL=72.1047e3ae.chunk.js.map