"use strict";(self.webpackChunkmidi_playground=self.webpackChunkmidi_playground||[]).push([[839],{1099:function(e,n,t){t.d(n,{PW:function(){return o},Qz:function(){return s},f5:function(){return i},mr:function(){return l}});var r=t(9439),a=t(4896),s=function(e){var n=Math.floor(e/a.$c.length),t=e%a.$c.length;return"".concat(a.$c[t]).concat(n)},o=function(e){var n=(e||"").match(/(.{1,2})(\d{1})/)||[],t=(0,r.Z)(n,3),s=(t[0],t[1]),o=t[2];return s&&o?parseInt(o)*a.$c.length+a.$c.findIndex((function(e){return e===s.toUpperCase()})):null},l=function(e){return e[0]>=a.wm&&e[0]<=a.wm+a.J5&&e[2]>0},i=function(e){return e[0]>=a.$Z&&e[0]<=a.$Z+a.J5||e[0]>=a.wm&&e[0]<=a.wm+a.J5&&0===e[2]}},5839:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ce}});var r=t(1413),a=t(5987),s=t(9439),o=t(2791),l=t(1099),i={lawless:{bpm:90,stepSequencers:[{channels:[1],noteDuration:30,notes:"C4 G4 C5 D#5 D5 C5 D5 D#5 G5 D#5 D5 C5 G4 F4 D#4 D4 C6 C6 C6 C5 C5 C5 C6 C6 C6 G5 D#5 D5 C5 G4 D#4 D4"}],noteValue:16},theGrid:{bpm:138,stepSequencers:[{channels:[1,2,3,4],noteDuration:100,notes:"G3 D4 G4 C5 D5 D#4 G4 A#4 D#5 F5 B3 G4 G#4 D5 D#5 F5 G5 G3 D4 G4 C5 D5 F4 G4 A#4 D#5 F5 C4 G4 G#4 D5 D#5"}],noteValue:16},newMaps:{bpm:120,stepSequencers:[{channels:[1,2,3,4],noteDuration:600,notes:"C5 A#4 C5 G#5:90 C#5 G#4 D#5 C5 A#4 G#5:90 C5 G#4 C#5 D#5 A#4 C5 G#5:90 G#5:0 C5 A#4 C5 G#5 C5 A#4 C5 G#5:90 C#5 G#4 D#5 C5 A#4 G5:90 C5 G#4 C#5 D#5 A#4 C#5 A#5:90 A#5:0 C5 A#4 C5 G#5:90 C#5 G#4 D#5 C5 A#4 G#5:90 C5 G#4 C#5 D#5 A#4 C5 G#5:90 G#5:0 C5 A#4 C5 G#5 C5 A#4 C5 G#5:90 C#5 G#4 D#5 C5 A#4 G5:90 A#4 G#4 C#5 D#5 A#4 C#5 C6:90 C6:0"}],noteValue:16,velocity:54},metropolis:{bpm:120,noteValue:16,stepSequencers:[{channels:[1],noteDuration:100,notes:"C5 G5 D6 C7 B6 F6 E5 B5 F#6 F7 E7 A#6 D7 C#7 A6 C7 B6 G#6",title:"Voice"},{channels:[1],noteDuration:100,notes:"F5 C6 G6 F7 E7 A#6 A5 E6 B6 A#7 A7 D#7 G7 F#7 D7 F7 E7 C#7",title:"Voice 4th up"}]},aintNobody:{bpm:100,noteValue:16,stepSequencers:[{channels:[1],noteDuration:100,notes:"D#3 A#3 C#4 D#4 D#4 A#4 C#5 D#5 D#6",title:"Sampler"},{channels:[1],noteDuration:100,notes:"x x x x F#6:100 x F#6:100 x F#6:100 D#6:100 A#5:100 G#6:100 x G#6:100 F6:100 C#6:100",title:"Melody"}]}},c=["stepSequencers"],u=["notes","title"],d=(0,l.PW)("C5"),v=function(e,n,t,r,a){return{centerBased:!0===a,defaultValue:t,max:n,min:e,title:r}},m=function(e){var n=e.stepSequencers,t=(0,a.Z)(e,c);return(0,r.Z)((0,r.Z)({},t),{},{stepSequencers:n.map((function(e,n){var o=e.notes,i=e.title,c=(0,a.Z)(e,u);return(0,r.Z)((0,r.Z)({},c),{},{title:i||"Step Sequencer ".concat(n+1),transpose:0,notes:o.split(" ").map((function(e){var n=e.split(":"),r=(0,s.Z)(n,2),a=r[0],o=r[1],i="x"===a,c=i?0:parseInt(o);return{note:i?null:(0,l.PW)(a),on:0!==c,velocity:isNaN(c)?t.velocity||64:c}}))})}))})}(i.aintNobody),f={noteDuration:v(1,1e3,m.noteDuration,"Note Duration"),transpose:v(-24,24,0,"Transpose",!0)},h={bpm:v(40,280,m.bpm,"Tempo"),noteValue:v(1,32,m.noteValue,"NoteValue")},p=["#709FB0","#849974","#765285","#AB3E16","#2A93D5","#6CBF84","#E2B091","#36384C"],C=t(4942),x=t(6270),j=t(7269),g=function(e,n){return e*n/gcd(e,n)},y=["notes"],Z=["notes"],S=["bpm","noteValue"],k=function(e,n){return 6e4/e*4/n},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{note:e,on:t,velocity:n}},D=function(e,n,t){var l=e.bpm,i=e.noteValue,c=(0,a.Z)(e,S),u=o.useContext(x.Z),d=u.selectedOutput,v=o.useState(null),m=(0,s.Z)(v,2),f=m[0],h=m[1],p=o.useRef((0,r.Z)((0,r.Z)({},c),{},{intervalId:null,intervalMillis:k(l,i),stepIdx:0,sequencersData:[],tempoChangeRequested:null,totalSteps:0}));o.useEffect((function(){null!==p.current.intervalId?p.current.tempoChangeRequested=k(l,i):p.current.intervalMillis=k(l,i)}),[l,i]),o.useEffect((function(){Object.keys(c).forEach((function(e){p.current[e]=c[e]}))}),[c]),o.useEffect((function(){if(Array.isArray(n)){p.current.sequencersData=n;var e=new Set,t=!1;n.forEach((function(n){e.add(n.notes.length),t||(t=n.solo)})),p.current.atLeastOneSolo=t,p.current.totalSteps=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.slice(1).reduce((function(e,n){return g(e,n)}),n[0])}(Array.from(e))}}),[n]);var C=o.useCallback((function(){var e=p.current,n=e.atLeastOneSolo,t=e.sequencersData,r=e.stepIdx,a=e.tempoChangeRequested,s=e.totalSteps;a&&(clearInterval(p.current.intervalId),p.current.intervalMillis=a,p.current.tempoChangeRequested=null,p.current.intervalId=setInterval(C,a)),h(r),p.current.stepIdx++,p.current.stepIdx>=s&&(p.current.stepIdx=0);var o=t.reduce((function(e,t){var a=t.channels,s=t.mute,o=t.noteDuration,l=t.notes,i=t.solo,c=t.transpose;if(n&&!i)return e;if(s)return e;var u=l[r%l.length],d=u.note,v=u.on,m=u.velocity;return v&&m>0&&a.forEach((function(n){var t=d+c;e.messages.push([j.XR["Channel".concat(n,"NoteOn")],t,m]),e.messagesOffGroups[o]||(e.messagesOffGroups[o]=[]),e.messagesOffGroups[o].push([j.XR["Channel".concat(n,"NoteOn")],t,0])})),e}),{messages:[],messagesOffGroups:{}}),l=o.messages,i=o.messagesOffGroups;l.length&&(l.forEach((function(e){return d.send(e)})),Object.keys(i).forEach((function(e){var n=i[e];setTimeout((function(){return n.forEach((function(e){return d.send(e)}))}),e)})))}),[d]);o.useEffect((function(){return t&&null!==u&&void 0!==u&&u.ready&&u.selectedOutput&&(p.current.intervalId=setInterval(C,intervalMillis)),function(){clearInterval(p.current.intervalId),p.current.intervalId=null}}),[t]);var y=o.useCallback((function(){h(0),p.current.stepIdx=0}),[h]);return{activeNoteIdx:f,onPlay:o.useCallback((function(){null===p.current.intervalId&&(p.current.intervalId=setInterval(C,p.current.intervalMillis))}),[C]),onSeekToStart:y,onStop:o.useCallback((function(){clearInterval(p.current.intervalId),p.current.intervalId=null}),[])}},N=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=o.useState(e.reduce((function(e,t){return e[t.name]=n[t.name]||t.defaultValue,e}),{})),a=(0,s.Z)(t,2),l=a[0],i=a[1],c=o.useCallback((function(e,n){return i((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,C.Z)({},e,n))}))}),[]);return{onSetParameter:c,parameters:l}},w=function(e,n){return{channels:(null===e||void 0===e?void 0:e.channels)||[1],color:p[n%p.length],mute:(null===e||void 0===e?void 0:e.mute)||!1,noteDuration:(null===e||void 0===e?void 0:e.noteDuration)||100,notes:(null===e||void 0===e?void 0:e.notes)||Array.from(Array(16)).map((function(){return b()})),solo:(null===e||void 0===e?void 0:e.solo)||!1,title:(null===e||void 0===e?void 0:e.title)||"StepSequencer ".concat(n+1),transpose:(null===e||void 0===e?void 0:e.transpose)||0}},A=t(184),M=["children","className","index","onClick","size"],G=function(e){var n=e.children,t=e.className,s=(e.index,e.onClick),o=e.size,l=(0,a.Z)(e,M);return(0,A.jsxs)("div",(0,r.Z)((0,r.Z)({className:"keyboard-button ".concat(o||""," ").concat(t),onClick:s},l),{},{children:[(0,A.jsx)("div",{className:"button-overlay"}),(0,A.jsx)("div",{className:"button-inner",children:n})]}))},E=["activeColor","children","defaultActive","onActiveChanged","onClick"],I=function(e){var n=e.activeColor,t=e.children,l=e.defaultActive,i=e.onActiveChanged,c=e.onClick,u=(0,a.Z)(e,E),d=o.useState(!!l),v=(0,s.Z)(d,2),m=v[0],f=v[1];o.useEffect((function(){i&&i(m)}),[m]);var h=o.useCallback((function(e){f((function(e){return!e})),c&&c(e)}),[f,c]);return(0,A.jsx)(G,(0,r.Z)((0,r.Z)({className:"keyboard-latching-button ".concat(m&&"active"," ").concat(n),onClick:h},u),{},{children:t}))},q=["active","children","className","index","on","onClick","onWheel"],V=function(e){var n=e.active,t=e.children,s=e.className,l=e.index,i=e.on,c=e.onClick,u=e.onWheel,d=(0,a.Z)(e,q),v=o.useCallback((function(e){c&&c(l,i,e)}),[l,i,c]),m=o.useCallback((function(e){u&&u(l,e.deltaY<0?"up":"down",e)}),[l,u]);return(0,A.jsxs)("div",(0,r.Z)((0,r.Z)({className:"keyboard-pad ".concat(s," ").concat(n&&"active"," ").concat(i&&"on"),onClick:v,onWheel:m},d),{},{children:[(0,A.jsx)("div",{className:"pad-overlay"}),(0,A.jsx)("div",{className:"pad-inner",children:t})]}))},O=t(763),z=-144,P=function(e){var n=e.centerBased,t=e.className,a=e.displayValue,l=e.max,i=e.min,c=e.style,u=e.title,d=e.value,v=o.useMemo((function(){return function(e,n,t){var r=288*(e-n)/(t-n)+z;return Math.max(z,Math.min(144,r))}(d,i,l)}),[d,i,l]),m=function(e){var n=e.max,t=e.min,r=e.onSetValue,a=e.step,s=void 0===a?1:a,l=e.value,i=o.useRef({factor:1,max:n,min:t,step:s,value:l}),c=o.useRef();o.useEffect((function(){i.current.step=s,i.current.value=l,i.current.min=t,i.current.max=n}),[l,s,t,n]);var u=o.useMemo((function(){return(0,O.debounce)((function(){i.current.factor=i.current.step}),25)}),[]);return o.useEffect((function(){var e=function(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();var n=i.current,t=n.value,a=n.step,s=n.min,o=n.max,l=t+a*i.current.factor*(e.deltaY<0?1:-1);r(Math.min(o,Math.max(s,l))),i.current.factor+=a,u()};return c.current.addEventListener("wheel",e,{passive:!1}),function(){c.current&&c.current.removeEventListener("wheel",e,{passive:!1})}}),[]),{elementRef:c}}(e),f=(m.onWheel,m.elementRef),h=function(e){var n=e.max,t=e.min,r=e.onSetValue,a=e.value,l=o.useRef({y:null,mouseMovelistener:null,mouseUplistener:null,mouseDown:!1,value:a}),i=o.useState(!1),c=(0,s.Z)(i,2),u=c[0],d=c[1];o.useEffect((function(){l.current.value=a}),[a]);var v=o.useCallback((function(e){0===e.button&&(d(!1),window.removeEventListener("mousemove",l.current.mouseMovelistener),window.removeEventListener("mouseup",l.current.mouseUplistener),l.current.listener=null)}),[d]),m=o.useCallback((function(e){var a=Math.min(n,Math.max(t,l.current.value+l.current.y-e.pageY));l.current.y=e.pageY,r(a)}),[r,t,n]);return{dragging:u,onMouseDown:o.useCallback((function(e){0===e.button&&(d(!0),l.current.y=e.pageY,l.current.mouseMovelistener=m,l.current.mouseUplistener=v,window.addEventListener("mousemove",l.current.mouseMovelistener),window.addEventListener("mouseup",l.current.mouseUplistener))}),[])}}(e),p=h.dragging,C=h.onMouseDown;return(0,A.jsxs)("div",{className:"rotary-knob ".concat(a&&"with-value"," ").concat(u&&"with-title"," ").concat(t),style:c,children:[p&&(0,A.jsx)("div",{className:"window-overlay"}),u&&(0,A.jsx)("div",{className:"title",children:u}),(0,A.jsx)("div",{className:"knob-overlay",onMouseDown:C,ref:f}),(0,A.jsxs)("div",{className:"knob-inner",children:[(0,A.jsx)("div",{className:"marker",style:{transform:"rotate(".concat(v,"deg)")}}),(0,A.jsx)("div",{className:"ticks",children:Array.from(Array(25)).map((function(e,t){return(0,A.jsx)("div",(0,r.Z)({},function(e,n,t){var r=z+12*e;return{className:"tick ".concat((t?n<0?r<=0&&r>=n:r>=0&&r<=n:n>z&&r<=n)&&"active"),key:e,style:{transform:"rotate(".concat(r,"deg)")}}}(t,v,n)),t)}))})]}),a&&(0,A.jsx)("div",{className:"value-wrap",children:(0,A.jsx)("div",{className:"value-display",children:d})})]})},F=["name","onSetParameter"],L=function(e){var n=e.name,t=e.onSetParameter,s=(0,a.Z)(e,F),l=o.useCallback((function(e){return t(n,e)}),[n,t]);return(0,A.jsx)("div",{className:"parameter-knob",children:(0,A.jsx)(P,(0,r.Z)({displayValue:!0,onSetValue:l},s))})},R=t(915),B=t(464),W=t(3382),$=t(938),T=t(7864),U=function(e){var n=e.active,t=e.data,r=e.onSelect,a=e.onSetParameter,s=(t||{}).title,l=void 0===s?"":s,i=o.useCallback((function(e){e.stopPropagation()}),[]),c=o.useCallback((function(e){return a("solo",e)}),[a]),u=o.useCallback((function(e){return a("mute",e)}),[a]);return(0,A.jsxs)("div",{className:"step-sequencer-summary ".concat(n&&"active"),onClick:r,children:[(0,A.jsxs)("div",{className:"step-sequencer-title",children:[(0,A.jsx)("div",{className:"step-sequencer-color",style:{backgroundColor:null===t||void 0===t?void 0:t.color}}),(0,A.jsx)("span",{children:l})]}),(0,A.jsxs)("div",{className:"sequencer-summary-body",children:[(0,A.jsx)("div",{className:"flex-spacer"}),(0,A.jsxs)("div",{className:"solo-mute",children:[(0,A.jsx)(I,{activeColor:"orange",onActiveChanged:c,onClick:i,size:"small",children:"Solo"}),(0,A.jsx)(I,{activeColor:"red",onActiveChanged:u,onClick:i,size:"small",children:"Mute"})]})]})]})},Y={opacity:.9,fill:"#000",fillOpacity:1,fillRule:"evenodd",stroke:"none",strokeWidth:.2,strokeMiterlimit:4,strokeDashoffset:0,strokeOpacity:1},J={fill:"none",fillOpacity:.75,fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},Q={fill:"#000",fillOpacity:1,fillRule:"evenodd",stroke:"none",strokeWidth:"1px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeOpacity:1},X=function(e){return(0,o.useMemo)((function(){return{flagStyle:(0,r.Z)((0,r.Z)({},Q),{},{fill:e}),headStyle:(0,r.Z)((0,r.Z)({},Y),{},{fill:e}),stemStyle:(0,r.Z)((0,r.Z)({},J),{},{stroke:e})}}),[e])},_=function(e){var n=e.color,t=X(void 0===n?"#000":n).headStyle;return(0,A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"19.5",height:"11.003",id:"svg1437",children:[(0,A.jsx)("defs",{id:"defs1440"}),(0,A.jsx)("path",{d:"M 9.125,0.0030002594 C 4.03428,0.18520026 0,2.5856003 0,5.5030003 C 0,8.5390003 4.368,11.003 9.75,11.003 C 15.132,11.003 19.5,8.5390003 19.5,5.5030003 C 19.5,2.4670003 15.132,0.0030002594 9.75,0.0030002594 C 9.53977,0.0030002594 9.33194,-0.0043997406 9.125,0.0030002594 z M 7.5,1.0655003 C 8.8579,0.92650026 10.56798,1.5561003 12,2.8467003 C 14.14502,4.7799003 14.87122,7.4906003 13.625,8.9092003 L 13.59375,8.9405003 C 12.32289,10.3506 9.53145,9.9153003 7.375,7.9717003 C 5.21855,6.0282003 4.51039,3.2881003 5.78125,1.8780003 C 6.20818,1.4043003 6.81306,1.1358003 7.5,1.0655003 z ",style:t,id:"path3937"})]})},H=function(e){var n=e.color,t=X(void 0===n?"#000":n),r=t.headStyle,a=t.stemStyle;return(0,A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"14.566",height:"41.919998",id:"svg1463",children:[(0,A.jsx)("defs",{id:"defs1466"}),(0,A.jsxs)("g",{transform:"matrix(-1,0,0,-1,247.8306,258.8548)",id:"g10997",children:[(0,A.jsx)("path",{d:"M 237.68484,218.18353 C 234.289,220.0035 232.47956,223.29808 233.59262,225.77649 C 234.77988,228.42013 238.85963,229.16621 242.6992,227.44186 C 246.53876,225.7175 248.69136,222.17246 247.5041,219.52883 C 246.31683,216.88519 242.23709,216.13911 238.39752,217.86346 C 238.15755,217.97123 237.91124,218.0622 237.68484,218.18353 z M 238.79457,220.42569 C 239.0358,220.30136 239.28005,220.20766 239.53576,220.09282 C 242.80883,218.62288 245.96997,218.55375 246.59187,219.93851 C 247.21377,221.32327 245.06209,223.64013 241.78902,225.11008 C 238.51594,226.58002 235.3548,226.64915 234.73291,225.26439 C 234.15959,223.98781 235.94804,221.89278 238.79457,220.42569 z ",style:r,id:"path10999"}),(0,A.jsx)("path",{d:"M 234.05234,224.51692 L 234.05234,258.10449",style:a,id:"path11001"})]})]})},K=function(e){var n=e.color,t=X(void 0===n?"#000":n),r=t.headStyle,a=t.stemStyle;return(0,A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"14.566",height:"41.919998",id:"svg1497",children:[(0,A.jsx)("defs",{id:"defs1500"}),(0,A.jsxs)("g",{transform:"matrix(-1,0,0,-1,313.2829,340.3223)",id:"g11029",children:[(0,A.jsx)("path",{d:"M 303.13715,299.65106 C 299.74131,301.47103 297.93187,304.76561 299.04493,307.24402 C 300.23219,309.88766 304.31194,310.63374 308.15151,308.90939 C 311.99107,307.18503 314.14367,303.63999 312.95641,300.99636 C 311.76914,298.35272 307.6894,297.60664 303.84983,299.33099 C 303.60986,299.43876 303.36355,299.52973 303.13715,299.65106 z ",style:r,id:"path11031"}),(0,A.jsx)("path",{d:"M 299.50465,305.98445 L 299.50465,339.57202",style:a,id:"path11033"})]})]})},ee=function(e){var n=e.color,t=X(void 0===n?"#000":n),r=t.flagStyle,a=t.headStyle,s=t.stemStyle;return(0,A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"24.886",height:"41.75",id:"svg1533",children:[(0,A.jsx)("defs",{id:"defs1536"}),(0,A.jsxs)("g",{transform:"translate(-427.1495,-34.28441)",id:"g12994",children:[(0,A.jsx)("path",{d:"M 431.56955,65.847427 C 428.17371,67.667397 426.36427,70.961977 427.47733,73.440387 C 428.66459,76.084027 432.74434,76.830107 436.58391,75.105757 C 440.42347,73.381397 442.57607,69.836357 441.38881,67.192727 C 440.20154,64.549087 436.1218,63.803007 432.28223,65.527357 C 432.04226,65.635127 431.79595,65.726097 431.56955,65.847427 z ",style:a,id:"path12112"}),(0,A.jsx)("path",{d:"M 441.18705,68.62194 L 441.18705,35.03437",style:s,id:"path12114"}),(0,A.jsx)("path",{d:"M 441.1824,35.99421 C 440.6199,42.30671 446.02495,44.56795 448.6824,47.49421 C 451.20836,50.27568 452.13107,53.48393 452.02788,56.48981 C 452.00033,57.29238 451.78245,60.76992 449.41343,64.25653 C 452.58135,55.50942 449.6319,51.99847 446.75047,49.20495 C 443.26053,45.82149 440.66435,42.63277 441.1824,35.99421 z ",style:r,id:"path12116"})]})]})},ne=function(e){var n=e.color,t=X(void 0===n?"#000":n),r=t.flagStyle,a=t.headStyle,s=t.stemStyle;return(0,A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"24.386",height:"45",id:"svg1572",children:[(0,A.jsx)("defs",{id:"defs1575"}),(0,A.jsxs)("g",{transform:"translate(-393.8446,-234.1771)",id:"g16559",children:[(0,A.jsx)("path",{d:"M 398.2646,268.99008 C 394.86876,270.81005 393.05932,274.10463 394.17238,276.58304 C 395.35964,279.22668 399.43939,279.97276 403.27896,278.24841 C 407.11852,276.52405 409.27112,272.97901 408.08386,270.33538 C 406.89659,267.69174 402.81685,266.94566 398.97728,268.67001 C 398.73731,268.77778 398.491,268.86875 398.2646,268.99008 z ",style:a,id:"path16482"}),(0,A.jsx)("path",{d:"M 407.8821,271.76459 L 407.8821,234.92702",style:s,id:"path16484"}),(0,A.jsx)("path",{d:"M 407.37745,235.63686 C 406.81495,241.94936 412.22,244.2106 414.87745,247.13686 C 417.40341,249.91833 418.32612,253.12658 418.22293,256.13246 C 418.19538,256.93503 417.9775,260.41257 415.60848,263.89918 C 418.7764,255.15207 415.82695,251.64112 412.94552,248.8476 C 409.45558,245.46414 406.8594,242.27542 407.37745,235.63686 z ",style:r,id:"path16486"}),(0,A.jsx)("path",{d:"M 407.14399,241.67087 C 406.58149,247.98337 411.98654,250.24461 414.64399,253.17087 C 417.16995,255.95234 418.09266,259.16059 417.98947,262.16647 C 417.96192,262.96904 417.74404,266.44658 415.37502,269.93319 C 418.54294,261.18608 415.59349,257.67513 412.71206,254.88161 C 409.22212,251.49815 406.62594,248.30943 407.14399,241.67087 z ",style:r,id:"path16488"})]})]})},te=function(e){var n=e.color,t=X(void 0===n?"#000":n),r=t.flagStyle,a=t.headStyle,s=t.stemStyle;return(0,A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"24.886",height:"49.174999",id:"svg1622",children:[(0,A.jsx)("defs",{id:"defs1625"}),(0,A.jsxs)("g",{transform:"translate(-519.7849,-288.4558)",id:"g16506",children:[(0,A.jsx)("path",{d:"M 524.20493,327.44378 C 520.80909,329.26375 518.99965,332.55833 520.11271,335.03674 C 521.29997,337.68038 525.37972,338.42646 529.21929,336.70211 C 533.05885,334.97775 535.21145,331.43271 534.02419,328.78908 C 532.83692,326.14544 528.75718,325.39936 524.91761,327.12371 C 524.67764,327.23148 524.43133,327.32245 524.20493,327.44378 z ",style:a,id:"path16453"}),(0,A.jsx)("path",{d:"M 533.82243,330.21829 L 533.82243,289.2061",style:s,id:"path16455"}),(0,A.jsx)("path",{d:"M 533.81778,297.59056 C 533.25528,303.90306 538.66033,306.1643 541.31778,309.09056 C 543.84374,311.87203 544.76645,315.08028 544.66326,318.08616 C 544.63571,318.88873 544.41783,322.36627 542.04881,325.85288 C 545.21673,317.10577 542.26728,313.59482 539.38585,310.8013 C 535.89591,307.41784 533.29973,304.22912 533.81778,297.59056 z ",style:r,id:"path16457"}),(0,A.jsx)("path",{d:"M 533.08432,302.37457 C 532.52182,308.68707 537.92687,310.94831 540.58432,313.87457 C 543.11028,316.65604 544.03299,319.86429 543.9298,322.87017 C 543.90225,323.67274 543.68437,327.15028 541.31535,330.63689 C 544.48327,321.88978 541.53382,318.37883 538.65239,315.58531 C 535.16245,312.20185 532.56627,309.01313 533.08432,302.37457 z ",style:r,id:"path16462"}),(0,A.jsx)("path",{d:"M 533.59854,290.64238 C 533.03604,296.95488 538.44109,299.21612 541.09854,302.14238 C 543.6245,304.92385 544.54721,308.1321 544.44402,311.13798 C 544.41647,311.94055 544.19859,315.41809 541.82957,318.9047 C 544.99749,310.15759 542.04804,306.64664 539.16661,303.85312 C 535.67667,300.46966 533.08049,297.28094 533.59854,290.64238 z ",style:r,id:"path16504"})]})]})},re=[{label:(0,A.jsx)(_,{color:"#EEE"}),value:1},{label:(0,A.jsx)(H,{color:"#EEE"}),value:2},{label:(0,A.jsx)(K,{color:"#EEE"}),value:4},{label:(0,A.jsx)(ee,{color:"#EEE"}),value:8},{label:(0,A.jsx)(ne,{color:"#EEE"}),value:16},{label:(0,A.jsx)(te,{color:"#EEE"}),value:32}],ae=Object.keys(h).map((function(e){return(0,r.Z)((0,r.Z)({},h[e]),{},{name:e})})),se=function(e){var n=e.activeStepSequencerIdx,t=e.onPlay,a=e.onSeekToStart,s=e.onSetActiveStepSequencerIdx,l=e.onSetData,i=e.onSetParameter,c=e.onStop,u=e.parameters,d=e.stepSequencersData,v=o.useCallback((function(e,n,t){return l((function(a){return Array.isArray(a)?a.map((function(a,s){return s===e?(0,r.Z)((0,r.Z)({},a),{},(0,C.Z)({},n,t)):a})):a}))}),[l]);return(0,A.jsxs)("div",{className:"global-controls",children:[(0,A.jsxs)(R.Z,{bordered:!1,children:[(0,A.jsxs)("div",{className:"control-row",children:[(0,A.jsx)(G,{onClick:a,children:(0,A.jsx)(W.Z,{})}),(0,A.jsx)(G,{onClick:t,children:(0,A.jsx)($.Z,{})}),(0,A.jsx)(G,{onClick:c,children:(0,A.jsx)(T.Z,{})})]}),(0,A.jsxs)("div",{className:"control-row",children:[(0,A.jsx)(L,(0,r.Z)((0,r.Z)({},h.bpm),{},{name:"bpm",onSetParameter:i,value:u.bpm})),(0,A.jsxs)("div",{className:"select-parameter",children:[(0,A.jsx)("div",{className:"title",children:"NoteValue"}),(0,A.jsx)(B.Z,{className:"note-value-select",dropdownClassName:"note-value-select-list",listHeight:280,onSelect:function(e){return i("noteValue",e)},options:re,size:"large",value:u.noteValue})]})]})]}),(0,A.jsx)("br",{}),(0,A.jsx)(R.Z,{bordered:!1,children:d.map((function(e,t){return(0,A.jsx)(U,{active:n===t,data:e,onSelect:function(){return s(t)},onSetParameter:function(e,n){return v(t,e,n)}},t)}))})]})},oe=t(3433),le=t(9333),ie=t(5581),ce=t(7382),ue=function(e){var n=e.channels,t=e.numOfChannels,r=e.onSetChannels,a=e.title,l=void 0===a?"Channels":a,i=o.useState(!1),c=(0,s.Z)(i,2),u=c[0],d=c[1],v=o.useCallback((function(){return d(!0)}),[d]),m=o.useCallback((function(e,t){return r(t?Array.from(new Set([].concat((0,oe.Z)(n),[e]))).sort((function(e,n){return e>n?1:e<n?-1:0})):n.filter((function(n){return n!==e})))}),[t,r,n]),f=o.useMemo((function(){return(0,A.jsx)(le.Z,{className:"midi-channels-menu",onClick:v,children:Array.from(Array(t)).map((function(e,t){return(0,A.jsx)(le.Z.Item,{children:(0,A.jsxs)("div",{className:"menu-item",children:[(0,A.jsxs)("div",{children:[t+1," "]}),(0,A.jsx)(ie.Z,{checked:n.includes(t+1),onChange:function(e){return m(t+1,e)},size:"small"})]})},t+1)}))})}),[n,t]),h=o.useMemo((function(){if(!n)return"";var e=n.reduce((function(e,n){return e.range.length>0&&n-e.range[e.range.length-1]>1?e.other.push(n):e.range.push(n),e}),{range:[],other:[]}),t=e.range,r=e.other;return t.length>1?"".concat(t[0],"-").concat(t[t.length-1]).concat(r.length>0?"..":""):[].concat((0,oe.Z)(t),(0,oe.Z)(r)).filter((function(e,n){return n<3})).join(",")+(r.length>2?"..":"")}),[n]);return(0,A.jsx)("div",{className:"numeric-parameter midi-channels",children:(0,A.jsx)(ce.Z,{onVisibleChange:d,overlay:f,placement:"bottomRight",visible:u,children:(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"title",children:l}),(0,A.jsx)("div",{className:"content",children:h})]})})})},de=t(4896),ve=t(8243),me=function(e){var n=e.notes,t=e.onChange,r=o.useCallback((function(e){var r,a="number"===typeof e?e:Math.max(1,Math.min(120,parseInt(null===(r=e.target)||void 0===r?void 0:r.value)));t(a>n.length?[].concat((0,oe.Z)(n),(0,oe.Z)(Array.from(Array(a-n.length)).map((function(){return b()})))):n.slice(0,a))}),[n,t]);return(0,A.jsxs)("div",{className:"sequence-length-modifier numeric-parameter",children:[(0,A.jsx)("div",{className:"title",children:"# Pads"}),(0,A.jsx)(ve.Z,{bordered:!1,max:120,min:1,onBlur:r,onPressEnter:r,onStep:r,defaultValue:(null===n||void 0===n?void 0:n.length)||1})]})},fe=Object.keys(f).map((function(e){return(0,r.Z)((0,r.Z)({},f[e]),{},{name:e})})),he=function(e){var n=e.activeNoteIdx,t=e.data,s=e.onSetData,i=t.noteDuration,c=t.transpose,u=o.useMemo((function(){return t&&Array.isArray(t.notes)?n%t.notes.length:n}),[n,t]),d=o.useMemo((function(){return{noteDuration:i,transpose:c}}),[i,c]),v=N(fe,d),m=v.parameters,f=v.onSetParameter;o.useEffect((function(){return s((function(e){return(0,r.Z)((0,r.Z)({},e),m)}))}),[m]);var h,p=o.useCallback((function(e){return s((function(n){return(0,r.Z)((0,r.Z)({},n),{},{notes:e})}))}),[s]),C=o.useCallback((function(e){return s((function(n){return(0,r.Z)((0,r.Z)({},n),{},{channels:e})}))}),[s]),x=(h=s,{onClick:o.useCallback((function(e){return h((function(n){var t=n.notes,s=(0,a.Z)(n,y);return(0,r.Z)((0,r.Z)({},s),{},{notes:t.map((function(n,t){return t===e?(0,r.Z)((0,r.Z)({},n),{},{on:!n.on}):n}))})}))}),[h]),onWheel:o.useCallback((function(e,n){return h((function(t){var s=t.notes,o=(0,a.Z)(t,Z);return(0,r.Z)((0,r.Z)({},o),{},{notes:s.map((function(t,a){return a===e?(0,r.Z)((0,r.Z)({},t),{},{note:"up"===n?t.note+1:t.note-1}):t}))})}))}),[h])});return(0,A.jsxs)("div",{className:"step-sequencer",children:[(0,A.jsx)("div",{className:"controls",children:(0,A.jsxs)(R.Z,{bordered:!1,children:[(0,A.jsxs)("div",{className:"step-sequencer-title",children:[(0,A.jsx)("div",{className:"step-sequencer-color",style:{backgroundColor:null===t||void 0===t?void 0:t.color}}),(0,A.jsx)("span",{children:null===t||void 0===t?void 0:t.title})]}),(0,A.jsx)("div",{className:"flex-spacer"}),(0,A.jsx)(me,{notes:null===t||void 0===t?void 0:t.notes,onChange:p}),(0,A.jsx)(ue,{channels:null===t||void 0===t?void 0:t.channels,numOfChannels:de.J5,onSetChannels:C,title:"Channels"}),fe.map((function(e){return(0,o.createElement)(L,(0,r.Z)((0,r.Z)({},e),{},{key:e.name,onSetParameter:f,value:m[e.name]}))}))]})}),(0,A.jsx)("div",{className:"pads-container",children:Array.isArray(null===t||void 0===t?void 0:t.notes)&&t.notes.map((function(e,n){var t=e.note,a=e.on;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(V,(0,r.Z)((0,r.Z)({active:u===n,index:n,on:a},x),{},{children:(0,l.Qz)(t)}),t),(n+1)%8===0&&(0,A.jsx)("div",{className:"flex-breaker"})]})}))})]})},pe=["activeNoteIdx"],Ce=function(){var e,n=o.useState((e=m.stepSequencers,(Array.isArray(e)?e:[]).map(w))),t=(0,s.Z)(n,2),l=t[0],i=t[1],c=o.useState(0),u=(0,s.Z)(c,2),d=u[0],v=u[1],f=o.useCallback((function(e){var n="function"===typeof e?e:function(){return e};i((function(e){return e.map((function(e,t){return t===d?n(e):e}))}))}),[i,d]),h=N(ae),p=h.parameters,C=h.onSetParameter,x=D(p,l),j=x.activeNoteIdx,g=(0,a.Z)(x,pe);return(0,A.jsxs)("div",{className:"sequencer",children:[(0,A.jsx)(se,(0,r.Z)((0,r.Z)({},g),{},{activeStepSequencerIdx:d,parameters:p,onSetParameter:C,onSetActiveStepSequencerIdx:v,onSetData:i,stepSequencersData:l})),(0,A.jsx)("div",{className:"step-sequencer",children:(0,A.jsx)(he,{activeNoteIdx:j,data:l[d],onSetData:f})})]})}}}]);
//# sourceMappingURL=839.6fd74973.chunk.js.map